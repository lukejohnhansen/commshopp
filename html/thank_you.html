<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>Thank you</title>
    <meta charset='utf-8'/>
      <script src="https://www.gstatic.com/firebasejs/5.9.3/firebase.js"></script>
    <link rel='stylesheet' href="../styles/thank_you.css">
    <script
    src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous">
  </script>
  <script src="../scripts/firebase_script.js"></script>



  </head>
  <body>
    <nav class="navbar">
        <ul>
          <li><a href="index.html"><img id="logo" src="../styles/logos/logo2/logo_transparent.png" alt="logo"></a></li>
          <li><a href="../about_us.html">About</a></li>
        </ul>
      </nav>
    <div id = "backgroundborder">
    <h2 id = "Title">You Added:</h2>
    <ul id = "list">
      <li id ="orderedItem1" class = "list"></li>
      <li id ="orderedItem2" class = "list"></li>
      <li id ="orderedItem3" class = "list"></li>
    </ul>
      <p id = "sendEmail"></p>
    </div>
    <script>
      var item1OrderQuantity = localStorage.getItem('item1OrderQuantity');
      var item1Name = localStorage.getItem('item1Name');
      $('#orderedItem1').append(item1OrderQuantity + " Apples");

      var item2OrderQuantity = localStorage.getItem('item2OrderQuantity');
      var item2Name = localStorage.getItem('item2Name');
      $('#orderedItem2').append(item2OrderQuantity + " Steamed Buns");

      var item3OrderQuantity = localStorage.getItem('item3OrderQuantity');
      var item3Name = localStorage.getItem('item3Name');
      $('#orderedItem3').append(item3OrderQuantity + " Eggs");
    </script>

    <script>


       // login/signin creates user and pulls name from firebase and displays on navbar.
        var userName;
        var userEmail;
        var userID;
        function createUser(userName, userEmail, userID){

                  firebase.database().ref('Users/' + userID).set({
                    username: userName,
                    email: userEmail
                  });


        }
        //grabs user info on login or signup
        firebase.auth().onAuthStateChanged(function(user) {
          if(user){
            userName = user.displayName;
            userEmail = user.email;
            userID = user.uid;
            createUser(userName, userEmail, userID);
            console.log(userEmail);
          }
        });
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          var out = document.getElementById("sendEmail");
          $('#sendEmail').append('<a href="mailto:'+userEmail+'?subject=Your%20CommShopp%20List&amp;body=Apples:%20'+item1OrderQuantity+',%20Eggs%20'+item2OrderQuantity+',%20Steamed%20Buns:%20'+item3OrderQuantity+'">Email me my Grocery List</a>');
        } else {
          $('#sendEmail').append("No Email");
        }
      });

    </script>

    <!--
    <script>

 firebase.auth().onAuthStateChanged(function(user){
        firebase.database().ref("users/"+user.uid).on(
    {
      email = user.uid.email
       $('#sendEmail').append(email);
        });
    });
    </script>
-->



      <!--//**

      var userEmail = firebase.database().ref("Users/");

      $('#sendEmail').append('<a href="mailto:'+userEmail+'?subject=Your%20CommShopp%20List&amp;body=Apples:%20'+item1OrderQuantity+',%20Eggs%20'+item2OrderQuantity+',%20Steamed%20Buns:%20'+item3OrderQuantity+'"><input id="submit" type="button" value="submit">Email me my Grocery List</a>');
      **/-->

  </body>
</html>
